"use strict";(self.webpackChunkldo_docs=self.webpackChunkldo_docs||[]).push([[3323],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>h});var o=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=o.createContext({}),c=function(e){var n=o.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},p=function(e){var n=c(e.components);return o.createElement(s.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(t),m=r,h=u["".concat(s,".").concat(m)]||u[m]||d[m]||a;return t?o.createElement(h,i(i({ref:n},p),{},{components:t})):o.createElement(h,i({ref:n},p))}));function h(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l[u]="string"==typeof e?e:r,i[1]=l;for(var c=2;c<a;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},7990:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>c});var o=t(7462),r=(t(7294),t(3905));const a={sidebar_position:2},i="01-Frontend",l={unversionedId:"RoboShop-Project-V3/frontend",id:"RoboShop-Project-V3/frontend",title:"01-Frontend",description:"The frontend is the service in RoboShop to serve the web content over Nginx. This will have the webframe for the web application.",source:"@site/docs/RoboShop-Project-V3/frontend.md",sourceDirName:"RoboShop-Project-V3",slug:"/RoboShop-Project-V3/frontend",permalink:"/learndevopsonline/build/docs/RoboShop-Project-V3/frontend",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/RoboShop-Project-V3/frontend.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Project Overview",permalink:"/learndevopsonline/build/docs/RoboShop-Project-V3/project-overview"},next:{title:"02-MongoDB",permalink:"/learndevopsonline/build/docs/RoboShop-Project-V3/mongodb"}},s={},c=[],p={toc:c};function u(e){let{components:n,...t}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"01-frontend"},"01-Frontend"),(0,r.kt)("p",null,"The frontend is the service in RoboShop to serve the web content over Nginx. This will have the webframe for the web application."),(0,r.kt)("p",null,"This is a static content and to serve static content we need a web server. This server"),(0,r.kt)("p",null,"Developer has chosen Nginx as a web server and thus we will install Nginx Web Server. "),(0,r.kt)("admonition",{title:"Hint",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"You can list modules by using ",(0,r.kt)("inlineCode",{parentName:"strong"},"dnf module list")))),(0,r.kt)("p",null,"Install Nginx "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"dnf module disable nginx -y\ndnf module enable nginx:1.24 -y\ndnf install nginx -y\n")),(0,r.kt)("p",null,"Start & Enable Nginx service "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl enable nginx \nsystemctl start nginx \n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Try to access the service once over the browser and ensure you get some default content.")),(0,r.kt)("p",null,"Remove the default content that web server is serving. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"rm -rf /usr/share/nginx/html/* \n")),(0,r.kt)("p",null,"Download the frontend content"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"curl -o /tmp/frontend.zip https://roboshop-artifacts.s3.amazonaws.com/frontend-v3.zip\n")),(0,r.kt)("p",null,"Extract the frontend content."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"cd /usr/share/nginx/html \nunzip /tmp/frontend.zip\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Try to access the nginx service once more over the browser and ensure you get roboshop content.")),(0,r.kt)("p",null,"Create Nginx Reverse Proxy Configuration to reach backend services."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"vim /etc/nginx/nginx.conf\n")),(0,r.kt)("p",null,"Add the following content "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-nginx",metastring:"configuration title=/etc/nginx/nginx.conf",configuration:!0,title:"/etc/nginx/nginx.conf"},'user nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log notice;\npid /run/nginx.pid;\n\ninclude /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    log_format  main  \'$remote_addr - $remote_user [$time_local] "$request" \'\n                      \'$status $body_bytes_sent "$http_referer" \'\n                      \'"$http_user_agent" "$http_x_forwarded_for"\';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile            on;\n    tcp_nopush          on;\n    keepalive_timeout   65;\n    types_hash_max_size 4096;\n\n    include             /etc/nginx/mime.types;\n    default_type        application/octet-stream;\n\n    include /etc/nginx/conf.d/*.conf;\n\n    server {\n        listen       80;\n        listen       [::]:80;\n        server_name  _;\n        root         /usr/share/nginx/html;\n\n        include /etc/nginx/default.d/*.conf;\n\n        error_page 404 /404.html;\n        location = /404.html {\n        }\n\n        error_page 500 502 503 504 /50x.html;\n        location = /50x.html {\n        }\n\n        location /images/ {\n          expires 5s;\n          root   /usr/share/nginx/html;\n          try_files $uri /images/placeholder.jpg;\n        }\n        location /api/catalogue/ { proxy_pass http://localhost:8080/; }\n        location /api/user/ { proxy_pass http://localhost:8080/; }\n        location /api/cart/ { proxy_pass http://localhost:8080/; }\n        location /api/shipping/ { proxy_pass http://localhost:8080/; }\n        location /api/payment/ { proxy_pass http://localhost:8080/; }\n\n        location /health {\n          stub_status on;\n          access_log off;\n        }\n\n    }\n}\n')),(0,r.kt)("admonition",{title:"Note",type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Ensure you replace the ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost")," with the actual ip address of those component server. Word ",(0,r.kt)("inlineCode",{parentName:"p"},"localhost")," is just used to avoid the failures on the Nginx Server.")),(0,r.kt)("p",null,"Restart Nginx Service to load the changes of the configuration."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-shell"},"systemctl restart nginx \n")))}u.isMDXComponent=!0}}]);